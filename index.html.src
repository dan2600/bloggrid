<!doctype html>
<html class="no-js" lang="en-us">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <title>VH1 News</title>
    <meta name="description" content="VH1 News Articles">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
    <style>
    body {
        font-family: 'Montserrat', sans-serif;
        font-size: 12px;
        margin: 0;


    }

    .grid {
        display: none;
        overflow: auto;
        text-align: center;
        max-width: 960px;
        margin: auto;
        margin-top: 15px;
        padding-left: 12px;
    }

    .athumb {
        vertical-align: top;
        position: relative;
        float: left;
        width: 32.5%;
        min-width: 32.5%;
        margin: 2px;
        background-size: cover;
        -webkit-transition: all 100ms ease-in;
        -webkit-transform: scale(1);
        -ms-transition: all 100ms ease-in;
        -ms-transform: scale(1);
        -moz-transition: all 100ms ease-in;
        -moz-transform: scale(1);
        transition: all 100ms ease-in;
        transform: scale(1);
    }

    .athumb::before {
        content: "";
        display: block;
        padding-top: 100%;
        /* initial ratio of 1:1*/
    }

    .crop {
        height: 100%;
        overflow: hidden;
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
    }

    .crop img {
        display: block;
        min-width: 100%;
        min-height: 100%;
        margin: auto;
        position: absolute;
        top: -100%;
        right: -100%;
        bottom: -100%;
        left: -100%;
        -webkit-tap-highlight-color: rgba(0,0,0,0);
    }

    .athumb:hover {
        box-shadow: 0 0 15px #000000;
        z-index: 900;
        -webkit-transition: all 100ms ease-in;
        -webkit-transform: scale(1.025);
        -ms-transition: all 100ms ease-in;
        -ms-transform: scale(1.025);
        -moz-transition: all 100ms ease-in;
        -moz-transform: scale(1.025);
        transition: all 100ms ease-in;
        transform: scale(1.025);
    }

    .header {
        width: 100%;
        text-align: center;
    }

    .header img {
        padding-bottom: 10px;
    }

    .header::after {
        display: block;
        margin-top: 10px;
        content: " ";
        width: 100%;
        height: 1px;
        background-color: black;
    }

    .back img {
        width: 35px;
        height: 35px;
        margin: 10px;
    }


    .loader {
        text-align: center;
        padding: 1em;
        margin: auto;
        display: block;85vw;
    }

    .loader svg {
        width: 330px;
        height: 330px;
        fill: #000000;
    }

    @media (max-width: 960px) {
        .athumb {
            width: 48%;
            margin: 1%;
        }
        .grid {
            padding-left: 0;
        }
        .crop img{
            min-width: 0;
            max-width: 85vw;
        }
    }
    </style>
</head>

<body>
    <div class="back"><a href="https://instagram.com/vh1"><img src="instagram-logo.svg" alt="Instagram Logo">   </a></div>
    <div class="header">
        <a href="https://instagram.com/vh1"><img src="vh1-logo.svg" alt="VH1 Logo" height=40></a>
        <br> Touch Photo for Story
    </div>
    <div class=container>
        <div class="loader" title="0">
            <svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">
                <path opacity="0.2" fill="#000" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946
    s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634
    c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z" />
                <path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0
    C22.32,8.481,24.301,9.057,26.013,10.047z">
                    <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 20 20" to="360 20 20" dur="0.5s" repeatCount="indefinite" />
                </path>
            </svg>
        </div>
        <div class="grid"></div>
    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script>
    var retryCount = 3;
    $(document).ready(function() {
        getRSSFeed();
    });

    function getRSSFeed() {
        $.getJSON("./rssfeed", function(data) {
            if (data.error) {
                console.log("Error Loading RSS feed");
                retryCount--;
                if (retryCount > 0) {
                    setTimeout(getRSSFeed, 1000);
                    return;
                } else {
                    location.reload();
                }
            } else {
                $.each(data.items, function() {
                    var imgURL = $(this)[0]["media:content"].url;
                    var linkURL = $(this)[0]["link"];
                    var title = $(this)[0]["title"];
                    $(".grid").append("<div class='athumb'><div class='crop'><a href='" + linkURL + "?xrs=_s.photoGrid' target='_blank'><img src='" + imgURL + "' alt='" + title + "'></a></div></div>");
                });
                $(".loader").remove();
                $(".grid").fadeIn("fast");
            }
        })
    }
    </script>
</body>

</html>